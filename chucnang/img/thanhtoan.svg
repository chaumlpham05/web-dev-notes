<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1090px" preserveAspectRatio="none" style="width:1649px;height:1090px;background:#FFFFFF;" version="1.1" viewBox="0 0 1649 1090" width="1649px" zoomAndPan="magnify"><title>&#128179; Sequence Diagram - &#272;&#7863;t l&#7883;ch &amp; Thanh to&#225;n qua VNPay (PHP MVC)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="529.8125" x="555.9451" y="27.9951">&#128179; Sequence Diagram - &#272;&#7863;t l&#7883;ch &amp; Thanh to&#225;n qua VNPay (PHP MVC)</text><rect fill="none" height="206.7344" style="stroke:#000000;stroke-width:1.5;" width="1484.4829" x="10" y="786.1172"/><g><title>&#128100; Ng&#432;&#7901;i d&#249;ng</title><rect fill="#000000" fill-opacity="0.00000" height="891.2578" width="8" x="65.7544" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="69" x2="69" y1="118.5938" y2="1009.8516"/></g><g><title>&#128421; View (X&#225;c nh&#7853;n &#273;&#7863;t l&#7883;ch)</title><rect fill="#000000" fill-opacity="0.00000" height="891.2578" width="8" x="313.4775" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="316.7393" x2="316.7393" y1="118.5938" y2="1009.8516"/></g><g><title>&#129504; Javascript (AJAX)</title><rect fill="#000000" fill-opacity="0.00000" height="891.2578" width="8" x="601.2925" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="604.4502" x2="604.4502" y1="118.5938" y2="1009.8516"/></g><g><title>&#127918; CartController</title><rect fill="#000000" fill-opacity="0.00000" height="891.2578" width="8" x="943.145" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="946.333" x2="946.333" y1="118.5938" y2="1009.8516"/></g><g><title>&#128196; Model: VnPayTransactions</title><rect fill="#000000" fill-opacity="0.00000" height="891.2578" width="8" x="1230.3125" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1233.687" x2="1233.687" y1="118.5938" y2="1009.8516"/></g><g><title>&#128216; Model: Booking</title><rect fill="#000000" fill-opacity="0.00000" height="891.2578" width="8" x="1413.2104" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1416.938" x2="1416.938" y1="118.5938" y2="1009.8516"/></g><g><title>&#127760; VNPay Sandbox</title><rect fill="#000000" fill-opacity="0.00000" height="891.2578" width="8" x="1562.0928" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1565.4829" x2="1565.4829" y1="118.5938" y2="1009.8516"/></g><g class="participant participant-head" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.5088" x="20" y="115.292">&#128100; Ng&#432;&#7901;i d&#249;ng</text><ellipse cx="69.7544" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M69.7544,58.7969 L69.7544,85.7969 M56.7544,66.7969 L82.7544,66.7969 M69.7544,85.7969 L56.7544,100.7969 M69.7544,85.7969 L82.7544,100.7969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.5088" x="20" y="1021.8467">&#128100; Ng&#432;&#7901;i d&#249;ng</text><ellipse cx="69.7544" cy="1033.6484" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M69.7544,1041.6484 L69.7544,1068.6484 M56.7544,1049.6484 L82.7544,1049.6484 M69.7544,1068.6484 L56.7544,1083.6484 M69.7544,1068.6484 L82.7544,1083.6484" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="View"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197.4766" x="218.7393" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183.4766" x="225.7393" y="107.292">&#128421; View (X&#225;c nh&#7853;n &#273;&#7863;t l&#7883;ch)</text></g><g class="participant participant-tail" data-participant="View"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197.4766" x="218.7393" y="1008.8516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183.4766" x="225.7393" y="1028.8467">&#128421; View (X&#225;c nh&#7853;n &#273;&#7863;t l&#7883;ch)</text></g><g class="participant participant-head" data-participant="JS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143.6846" x="533.4502" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129.6846" x="540.4502" y="107.292">&#129504; Javascript (AJAX)</text></g><g class="participant participant-tail" data-participant="JS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143.6846" x="533.4502" y="1008.8516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129.6846" x="540.4502" y="1028.8467">&#129504; Javascript (AJAX)</text></g><g class="participant participant-head" data-participant="CartController"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125.624" x="884.333" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111.624" x="891.333" y="107.292">&#127918; CartController</text></g><g class="participant participant-tail" data-participant="CartController"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125.624" x="884.333" y="1008.8516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111.624" x="891.333" y="1028.8467">&#127918; CartController</text></g><g class="participant participant-head" data-participant="VnPayTransactions"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="211.251" x="1128.687" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="197.251" x="1135.687" y="107.292">&#128196; Model: VnPayTransactions</text></g><g class="participant participant-tail" data-participant="VnPayTransactions"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="211.251" x="1128.687" y="1008.8516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="197.251" x="1135.687" y="1028.8467">&#128196; Model: VnPayTransactions</text></g><g class="participant participant-head" data-participant="Booking"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134.5449" x="1349.938" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120.5449" x="1356.938" y="107.292">&#128216; Model: Booking</text></g><g class="participant participant-tail" data-participant="Booking"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134.5449" x="1349.938" y="1008.8516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120.5449" x="1356.938" y="1028.8467">&#128216; Model: Booking</text></g><g class="participant participant-head" data-participant="VNPay"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143.2197" x="1494.4829" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129.2197" x="1501.4829" y="107.292">&#127760; VNPay Sandbox</text></g><g class="participant participant-tail" data-participant="VNPay"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143.2197" x="1494.4829" y="1008.8516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129.2197" x="1501.4829" y="1028.8467">&#127760; VNPay Sandbox</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1642.7026" x="0" y="149.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1642.7026" y1="149.1602" y2="149.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1642.7026" y1="152.1602" y2="152.1602"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="278.2847" x="682.209" y="138.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="259.7588" x="688.209" y="154.6606">B&#432;&#7899;c 1: Hi&#7875;n th&#7883; giao di&#7879;n x&#225;c nh&#7853;n</text><g class="message" data-participant-1="User" data-participant-2="View"><polygon fill="#181818" points="305.4775,188.8594,315.4775,192.8594,305.4775,196.8594,309.4775,192.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="69.7544" x2="311.4775" y1="192.8594" y2="192.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223.7231" x="76.7544" y="187.7935">Truy c&#7853;p trang "Xem l&#7841;i th&#244;ng tin"</text></g><g class="message" data-participant-1="View" data-participant-2="JS"><polygon fill="#181818" points="593.2925,217.9922,603.2925,221.9922,593.2925,225.9922,597.2925,221.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="317.4775" x2="599.2925" y1="221.9922" y2="221.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263.8149" x="324.4775" y="216.9263">Load d&#7919; li&#7879;u th&#250; c&#432;ng, d&#7883;ch v&#7909;, t&#7893;ng ti&#7873;n</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1642.7026" x="0" y="250.5586"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1642.7026" y1="250.5586" y2="250.5586"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1642.7026" y1="253.5586" y2="253.5586"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="438.6201" x="602.0413" y="239.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="420.0942" x="608.0413" y="256.0591">B&#432;&#7899;c 2: X&#225;c nh&#7853;n &#273;i&#7873;u kho&#7843;n v&#224; nh&#7845;n "X&#225;c nh&#7853;n &#273;&#7863;t l&#7883;ch"</text><g class="message" data-participant-1="User" data-participant-2="JS"><polygon fill="#181818" points="593.2925,290.2578,603.2925,294.2578,593.2925,298.2578,597.2925,294.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="69.7544" x2="599.2925" y1="294.2578" y2="294.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="266.7603" x="76.7544" y="289.1919">Click "X&#225;c nh&#7853;n &#273;&#7863;t l&#7883;ch" (&#273;&#227; tick &#273;&#7891;ng &#253;)</text></g><g class="message" data-participant-1="JS" data-participant-2="CartController"><polygon fill="#181818" points="935.145,319.3906,945.145,323.3906,935.145,327.3906,939.145,323.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="605.2925" x2="941.145" y1="323.3906" y2="323.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213.3892" x="612.2925" y="318.3247">AJAX POST /cart/confirm-booking</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1642.7026" x="0" y="351.957"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1642.7026" y1="351.957" y2="351.957"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1642.7026" y1="354.957" y2="354.957"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="312.124" x="665.2893" y="341.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="293.5981" x="671.2893" y="357.4575">B&#432;&#7899;c 3: Controller x&#7917; l&#253; v&#224; t&#7841;o giao d&#7883;ch</text><g class="message" data-participant-1="CartController" data-participant-2="Booking"><polygon fill="#181818" points="1405.2104,391.6563,1415.2104,395.6563,1405.2104,399.6563,1409.2104,395.6563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="947.145" x2="1411.2104" y1="395.6563" y2="395.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167.978" x="954.145" y="390.5903">T&#236;m th&#244;ng tin &#273;&#417;n &#273;&#7863;t l&#7883;ch</text></g><g class="message" data-participant-1="CartController" data-participant-2="VnPayTransactions"><polygon fill="#181818" points="1222.3125,420.7891,1232.3125,424.7891,1222.3125,428.7891,1226.3125,424.7891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="947.145" x2="1228.3125" y1="424.7891" y2="424.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263.1675" x="954.145" y="419.7231">T&#7841;o b&#7843;n ghi giao d&#7883;ch (status = created)</text></g><g class="message" data-participant-1="CartController" data-participant-2="CartController"><line style="stroke:#181818;stroke-width:1;" x1="947.145" x2="989.145" y1="453.9219" y2="453.9219"/><line style="stroke:#181818;stroke-width:1;" x1="989.145" x2="989.145" y1="453.9219" y2="466.9219"/><line style="stroke:#181818;stroke-width:1;" x1="948.145" x2="989.145" y1="466.9219" y2="466.9219"/><polygon fill="#181818" points="958.145,462.9219,948.145,466.9219,958.145,470.9219,954.145,466.9219" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="270.9243" x="954.145" y="448.856">G&#7885;i createVNPayUrl(...) &#8594; t&#7841;o URL + hash</text></g><g class="message" data-participant-1="CartController" data-participant-2="VnPayTransactions"><polygon fill="#181818" points="1222.3125,492.0547,1232.3125,496.0547,1222.3125,500.0547,1226.3125,496.0547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="947.145" x2="1228.3125" y1="496.0547" y2="496.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144.7075" x="954.145" y="490.9888">C&#7853;p nh&#7853;t payment_url</text></g><g class="message" data-participant-1="CartController" data-participant-2="JS"><polygon fill="#181818" points="616.2925,521.1875,606.2925,525.1875,616.2925,529.1875,612.2925,525.1875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="610.2925" x2="946.145" y1="525.1875" y2="525.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="317.8525" x="622.2925" y="520.1216">Tr&#7843; v&#7873; JSON (message + metadata.payment_url)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1642.7026" x="0" y="553.7539"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1642.7026" y1="553.7539" y2="553.7539"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1642.7026" y1="556.7539" y2="556.7539"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="246.3242" x="698.1892" y="543.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="227.7983" x="704.1892" y="559.2544">B&#432;&#7899;c 4: JS redirect sang VNPay</text><g class="message" data-participant-1="JS" data-participant-2="VNPay"><polygon fill="#181818" points="1554.0928,593.4531,1564.0928,597.4531,1554.0928,601.4531,1558.0928,597.4531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="605.2925" x2="1560.0928" y1="597.4531" y2="597.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155.2446" x="612.2925" y="592.3872">Redirect &#8594; payment_url</text></g><g class="message" data-participant-1="User" data-participant-2="VNPay"><polygon fill="#181818" points="1554.0928,622.5859,1564.0928,626.5859,1554.0928,630.5859,1558.0928,626.5859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="69.7544" x2="1560.0928" y1="626.5859" y2="626.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220.8794" x="76.7544" y="621.52">Ch&#7885;n ng&#226;n h&#224;ng, OTP, thanh to&#225;n</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1642.7026" x="0" y="655.1523"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1642.7026" y1="655.1523" y2="655.1523"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1642.7026" y1="658.1523" y2="658.1523"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="280.2969" x="681.2029" y="644.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="261.771" x="687.2029" y="660.6528">B&#432;&#7899;c 5: VNPay redirect l&#7841;i h&#7879; th&#7889;ng</text><g class="message" data-participant-1="VNPay" data-participant-2="CartController"><polygon fill="#181818" points="958.145,694.8516,948.145,698.8516,958.145,702.8516,954.145,698.8516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="952.145" x2="1565.0928" y1="698.8516" y2="698.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215.2935" x="964.145" y="693.7856">GET /cart/finished/success?vnp_*</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1642.7026" x="0" y="727.418"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1642.7026" y1="727.418" y2="727.418"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1642.7026" y1="730.418" y2="730.418"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="244.4897" x="699.1064" y="716.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="225.9639" x="705.1064" y="732.9185">B&#432;&#7899;c 6: H&#7879; th&#7889;ng x&#7917; l&#253; k&#7871;t qu&#7843;</text><g class="message" data-participant-1="CartController" data-participant-2="VnPayTransactions"><polygon fill="#181818" points="1222.3125,767.1172,1232.3125,771.1172,1222.3125,775.1172,1226.3125,771.1172" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="947.145" x2="1228.3125" y1="771.1172" y2="771.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.4824" x="954.145" y="766.0513">T&#236;m vnp_txn_ref</text></g><path d="M10,786.1172 L74.4429,786.1172 L74.4429,793.25 L64.4429,803.25 L10,803.25 L10,786.1172" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="206.7344" style="stroke:#000000;stroke-width:1.5;" width="1484.4829" x="10" y="786.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="25" y="799.1841">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="322.3838" x="89.4429" y="798.3276">[Giao d&#7883;ch th&#224;nh c&#244;ng (vnp_ResponseCode == '00')]</text><g class="message" data-participant-1="CartController" data-participant-2="VnPayTransactions"><polygon fill="#181818" points="1222.3125,820.3828,1232.3125,824.3828,1222.3125,828.3828,1226.3125,824.3828" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="947.145" x2="1228.3125" y1="824.3828" y2="824.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173.0562" x="954.145" y="819.3169">C&#7853;p nh&#7853;t status = success</text></g><g class="message" data-participant-1="CartController" data-participant-2="Booking"><polygon fill="#181818" points="1405.2104,849.5156,1415.2104,853.5156,1405.2104,857.5156,1409.2104,853.5156" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="947.145" x2="1411.2104" y1="853.5156" y2="853.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="403.7617" x="954.145" y="848.4497">C&#7853;p nh&#7853;t status = confirmed, payment_status = paid, paid_at</text></g><g class="message" data-participant-1="CartController" data-participant-2="User"><polygon fill="#181818" points="80.7544,878.6484,70.7544,882.6484,80.7544,886.6484,76.7544,882.6484" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="74.7544" x2="946.145" y1="882.6484" y2="882.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185.0405" x="86.7544" y="877.5825">Redirect &#8594; /booking/success</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="10" x2="1494.4829" y1="891.6484" y2="891.6484"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="120.1567" x="15" y="901.8589">[Giao d&#7883;ch th&#7845;t b&#7841;i]</text><g class="message" data-participant-1="CartController" data-participant-2="VnPayTransactions"><polygon fill="#181818" points="1222.3125,922.5859,1232.3125,926.5859,1222.3125,930.5859,1226.3125,926.5859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="947.145" x2="1228.3125" y1="926.5859" y2="926.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95.1196" x="954.145" y="921.52">status = failed</text></g><g class="message" data-participant-1="CartController" data-participant-2="Booking"><polygon fill="#181818" points="1405.2104,951.7188,1415.2104,955.7188,1405.2104,959.7188,1409.2104,955.7188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="947.145" x2="1411.2104" y1="955.7188" y2="955.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.5293" x="954.145" y="950.6528">payment_status = failed</text></g><g class="message" data-participant-1="CartController" data-participant-2="User"><polygon fill="#181818" points="80.7544,980.8516,70.7544,984.8516,80.7544,988.8516,76.7544,984.8516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="74.7544" x2="946.145" y1="984.8516" y2="984.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.2061" x="86.7544" y="979.7856">Redirect &#8594; /booking/failed</text></g><!--SRC=[dLJBRjD05DtxAwwoe0dqmNjXAI0825Jr4RLfrLqr7K_jKPrni2UbNLOWkk0X2W8X8TI6Kh6XW0GI8XPYuQh_ORwWdy2TiPF6RbeUMSKpzznxxhddZkJIPN2m-UmBJBCxJIOeWnkSs3wfmn3iFOtRtoIuSVYGEd0AQWuH3aWlQWcuqoGmEr4bgr2itgx2-6obP1Y4Ii-7cO3vG08e76nkl8C9U_zp7BxXO4NVXLqm6iINdF864H9cERkRHhxSIRwASr6BWd3Yzgw0lOqU0gKiTdGwHRxVWb6oJ0BgyuQ4uhNHQtEvq0h-htX2-fxhTgaz-PWxpr4Js5lD9oB0fhWdWXJs_3wCUnPppQCHsGJNFM-92xi3UzM1fUUvQbh99FJHq_HpcWXhmLif64Qv3DULYgyfd3FXDe_3UmAaWxA0pOa75fwi2rZfaQvSDlGSXguakffGyvkhGF6o0H9Psr2OOtNKjjtYc2lwYYUIYuAXmn660fimvX4Bh3Zy1AwgqLIHRQ3xduKzgCwLCPRZS6SGP1o-q2dYS4raA9yt8JjK5TA49SUBszi2bgCjVRKZaD5nmo_qDgIPLLnEbqv45FSsecqaX65u4pv7Tj6Fae5ep97pX0dADr2TdAx12CMx4Ug9HUxNXnQIUMKwke3b3x4hSRWBRlH3To9HJo-TIY8F4iyLm_8TT-1OeW_r7lsHwduhrqeV_55xOYPTUa6BQZiyGw8OI2AR0PI1-en8PfNw93sYoQquVCnJXFRaZEyMXuU7I_3hmREqrPcfCJW33Wd-bcP5Mr2FJ4A3hDQPaFDDt-q3ruEk-TYHCjaQVazEGB7EWe3O3AlMcIGMaMIu9qqfCwcBfahYCulxZ4e8bE-JxSAn94v8FasOwWIftdfvTVSe3QpWuZqM8EpehG0dsbAhC5chuWeSleyP4fVC5DlbaMmTvbdNQxo1h91F4jHt43SxjbpaWWSEiqQ29gKenDLbqPW_dIbt6P-8tinTVox5xPyINswbPrzNzdMLygSg8bV4lCyM3U9AkDLZBQaaS81g1nTLv1GB6WXc5Npni10Cd3qxK380V__XaAvnquQFoNEuKFtHwJepQx0xs-vTWt1zpArv8e_9hqsGCyb8-ZPqPc4mDs0vRV1TasedM_mV1EWoMoJSPTOVMpxIqOcu4rj9aKnOlm40]--></g></svg>